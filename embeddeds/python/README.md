The example we use is the one described [here](https://github.com/mosser/ArduinoML-kernel/blob/master/README.md).

The resulting Arduino code is:

```c
// generated by ArduinoML

void setup() {
	pinMode(9, INPUT);
	pinMode(12, OUTPUT);
}

void loop() { state_off(); }

void state_off() {
	digitalWrite(12, 0);
	if (digitalRead(9) == 1) { state_on(); }
	state_off();
};

void state_on() {
	digitalWrite(12, 1);
	if (digitalRead(9) == 0) { state_off(); }
	state_on();
};
```

Alternatives:

- [No DSL](#nodsl) for reference

- [DSL with Builder+MethodChaining Patterns](#methodchaining)
 
## <a name="nodsl">No DSL</a>

The direct use of the model in Python is quite verbose.

```python
[... imports ...]

button = Sensor("button", 9)
led = Actuator("led", 12)

on = State("on", [Action(HIGH, led)])
off = State("off", [Action(LOW, led)])

switchon = Transition(button, HIGH, on)
switchoff = Transition(button, LOW, off)

on.settransition(switchoff)
off.settransition(switchon)

app = App("on-off", [button, led], [off, on])

print app
```

In a shell:

1. go to the `embeddeds/python` directory
2. run the python interpreter, `python`, and type:


	```bash
	>>> from pyArduinoML.model.Main import demo
	>>> demo()
	```
	
3. alternatively to 2 you can run directly:

	```bash
	python -m pyArduinoML.model.Main
	```

## <a name="methodchaining">DSL with Builder+MethodChaining Patterns</a>

It is simpler with a DSL based on the [Builder](https://en.wikipedia.org/wiki/Builder_pattern) and [MethodChaining](https://en.wikipedia.org/wiki/Method_chaining) patterns.

```python
[... imports ...]

app = AppBuilder("on-off") \
    .sensor("button").on_pin(9) \
    .actuator("led").on_pin(12) \
    .state("off") \
        .set("led").to(LOW) \
        .when("button").has_value(HIGH).go_to_state("on") \
    .state("on") \
        .set("led").to(HIGH) \
        .when("button").has_value(LOW).go_to_state("off") \
    .get_contents()

print app
```

A slight variation is to use python `eval` construct to avoid some syntactic sugar (line breaks).

```python
[... imports ...]

app2 = AppStringBuilder("""
AppBuilder("on-off")
    .sensor("button").on_pin(9)
    .actuator("led").on_pin(12)
    .state("off")
        .set("led").to(LOW)
        .when("button").has_value(HIGH).go_to_state("on")
    .state("on")
        .set("led").to(HIGH)
        .when("button").has_value(LOW).go_to_state("off")
""")

print app2
```

Or course, there, you loose auto-completion (which is anyway limited in IDEs for python due to the typing mechanisms)

In a shell:

1. go to the `embeddeds/python` directory
2. run the python interpreter, `python`, and type:


	```bash
	>>> from pyArduinoML.methodchaining.Main import *
	>>> demo1() # for the first example
	>>> demo2() # for the variation
	```
	
3. alternatively to 2 you can run directly:

	```bash
	python -m pyArduinoML.methodchaining.Main
	```
